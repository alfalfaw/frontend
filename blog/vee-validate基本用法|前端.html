<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vee-validate 基本用法 | 大前端研究所</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/frontend/favicon.ico">
    <meta name="description" content="欢迎关注公众号：大前端研究所">
    
    <link rel="preload" href="/frontend/assets/css/0.styles.7c5de612.css" as="style"><link rel="preload" href="/frontend/assets/js/app.81e51045.js" as="script"><link rel="preload" href="/frontend/assets/js/2.b2951490.js" as="script"><link rel="preload" href="/frontend/assets/js/12.dd903ed4.js" as="script"><link rel="prefetch" href="/frontend/assets/js/10.6942882c.js"><link rel="prefetch" href="/frontend/assets/js/11.8cf1fb5d.js"><link rel="prefetch" href="/frontend/assets/js/13.d2b10253.js"><link rel="prefetch" href="/frontend/assets/js/14.59046f73.js"><link rel="prefetch" href="/frontend/assets/js/15.08f63d2d.js"><link rel="prefetch" href="/frontend/assets/js/16.10da3fa2.js"><link rel="prefetch" href="/frontend/assets/js/3.66d53e08.js"><link rel="prefetch" href="/frontend/assets/js/4.60aa8e5e.js"><link rel="prefetch" href="/frontend/assets/js/5.3075a5b6.js"><link rel="prefetch" href="/frontend/assets/js/6.2cb66473.js"><link rel="prefetch" href="/frontend/assets/js/7.61c88007.js"><link rel="prefetch" href="/frontend/assets/js/8.87b399e5.js"><link rel="prefetch" href="/frontend/assets/js/9.ba78b3d4.js">
    <link rel="stylesheet" href="/frontend/assets/css/0.styles.7c5de612.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/frontend/" class="home-link router-link-active"><!----> <span class="site-name">大前端研究所</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/frontend/blog/" class="nav-link router-link-active">
  博客
</a></div><div class="nav-item"><a href="/frontend/share/" class="nav-link">
  分享
</a></div><div class="nav-item"><a href="/frontend/interview/" class="nav-link">
  面试
</a></div> <a href="https://github.com/alfalfaw/frontend" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/frontend/blog/" class="nav-link router-link-active">
  博客
</a></div><div class="nav-item"><a href="/frontend/share/" class="nav-link">
  分享
</a></div><div class="nav-item"><a href="/frontend/interview/" class="nav-link">
  面试
</a></div> <a href="https://github.com/alfalfaw/frontend" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Express</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/blog/" aria-current="page" class="sidebar-link">简介</a></li><li><a href="/frontend/blog/Express学习笔记|Express.html" class="sidebar-link">Express 笔记</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Koa</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/blog/Koa学习笔记|Koa.html" class="sidebar-link">Koa 笔记</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/blog/VuePress部署到GithubPages|前端.html" class="sidebar-link">VuePress 搭建个人博客网站</a></li><li><a href="/frontend/blog/vee-validate基本用法|前端.html" class="active sidebar-link">vee-validate 基本用法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/blog/vee-validate基本用法|前端.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/frontend/blog/vee-validate基本用法|前端.html#基本使用" class="sidebar-link">基本使用</a></li><li class="sidebar-sub-header"><a href="/frontend/blog/vee-validate基本用法|前端.html#懒加载" class="sidebar-link">懒加载</a></li><li class="sidebar-sub-header"><a href="/frontend/blog/vee-validate基本用法|前端.html#验证整个表单" class="sidebar-link">验证整个表单</a></li><li class="sidebar-sub-header"><a href="/frontend/blog/vee-validate基本用法|前端.html#触发方式" class="sidebar-link">触发方式</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vee-validate-基本用法"><a href="#vee-validate-基本用法" class="header-anchor">#</a> vee-validate 基本用法</h1> <p><code>vee-validate</code> 是一个轻量级的表单验证插件，内置了丰富的校验规则和错误提示，而且非常容易扩展，下面简单介绍它的使用方法</p> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <div class="language- extra-class"><pre class="language-text"><code>npm i vee-validate
</code></pre></div><h2 id="基本使用"><a href="#基本使用" class="header-anchor">#</a> 基本使用</h2> <p>template</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;ValidationProvider class=&quot;form-item&quot; name=&quot;email&quot; tag=&quot;div&quot; rules=&quot;required|email&quot; v-slot=&quot;{ errors }&quot;&gt;
  &lt;label&gt;邮箱&lt;/label&gt;
  &lt;input v-model=&quot;email&quot; type=&quot;text&quot; /&gt;
  &lt;span class=&quot;ml-3&quot;&gt;{{ errors[0] }}&lt;/span&gt;
&lt;/ValidationProvider&gt;
&lt;ValidationProvider class=&quot;form-item&quot; name=&quot;password&quot; tag=&quot;div&quot; rules=&quot;required|password:6,18&quot; v-slot=&quot;{ errors }&quot;&gt;
  &lt;label&gt;密码&lt;/label&gt;
  &lt;input v-model=&quot;password&quot; type=&quot;password&quot; autocomplete=&quot;off&quot; /&gt;
  &lt;span class=&quot;ml-3&quot;&gt;{{ errors[0] }}&lt;/span&gt;
&lt;/ValidationProvider&gt;
</code></pre></div><p>script</p> <div class="language- extra-class"><pre class="language-text"><code>import { ValidationProvider } from 'vee-validate'

export default {
  name: 'HelloI18n',
  components: { ValidationProvider },
  data() {
    return {
      email: ''，
      password: ''
    }
  }
}
&lt;/script&gt;
</code></pre></div><p><code>ValidationProvider</code>会自动在其子孙结点中查找具有<code>v-model</code>、<code>:value</code>的输入框并进行校验。<code>tag</code>指定<code>&lt;ValidationProvider&gt;</code>渲染成的 html 元素。<code>name</code>指定字段的名字，通过<code>name</code>还可以配置字段名的多语言版本，如果没有为<code>ValidationProvider</code>提供<code>name</code>，则字段名默认为输入框的<code>id</code>或者<code>name</code>属性。<code>rules</code>指定校验规则，应用多个规则用<code>|</code>隔开，<code>vee-validate</code>内置了许多校验<a href="https://logaretm.github.io/vee-validate/guide/rules.html#rules" target="_blank" rel="noopener noreferrer">规则<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，还可以通过<code>extent</code>自定义规则。</p> <h3 id="校验规则"><a href="#校验规则" class="header-anchor">#</a> 校验规则</h3> <p>一个项目中可能出现很多相同的输入框，为了让校验规则在这些输入框都能生效，可以在一个单独文件中定义所有校验规则，然后在<code>main.js</code>中引入</p> <p><strong>utils/veevalidate.js</strong></p> <div class="language- extra-class"><pre class="language-text"><code>import { extend, localize } from 'vee-validate'
import { required, email, min, length, confirmed } from 'vee-validate/dist/rules'
import zh from 'vee-validate/dist/locale/zh_CN.json'
import en from 'vee-validate/dist/locale/en.json'
extend('email', email)

extend('min', min)
extend('required', required)

extend('length', length)

extend('confirmed', confirmed)

extend('password', {
  validate(value, { min, max }) {
    return value.length &gt;= min &amp;&amp; value.length &lt;= max
  },
  params: ['min', 'max']
})
localize({
  'zh-CN': {
    names: {
      email: '邮箱',
      password: '密码'
    },
    messages: {
      ...zh.messages,
      required: '请输入{_field_}',
      email: '请输入正确的邮箱格式',
      password: '密码必须是6到18位'
    }
  },
  en: {
    names: {
      email: 'email',
      password: 'password'
    },
    messages: {
      ...en.messages,
      required: 'please input {_field_}',
      email: 'please input correct email',
      password: 'the password length should be 6 to 18'
    }
  }
})

localize('zh-CN')
</code></pre></div><h3 id="自定义校验规则"><a href="#自定义校验规则" class="header-anchor">#</a> 自定义校验规则</h3> <div class="language- extra-class"><pre class="language-text"><code>extend('ruleName', rule)
</code></pre></div><p>第一个参数是规则名称，第二个参数是规则的 schema。如果希望在定义规则时同时定义错误消息体，可以像下面这样写</p> <div class="language- extra-class"><pre class="language-text"><code>extend('required', {
  ...required,      // 官方自带的校验规则
  message: '必填项!!!' // 自定义错误消息
})
</code></pre></div><h3 id="传参"><a href="#传参" class="header-anchor">#</a> 传参</h3> <p>自定义规则支持传参，如<code>rules=&quot;required|password:6,18&quot;</code>表示应用<code>required</code>和<code>password</code>两个规则，并向第二个规则传递了两个参数，接收的参数需要在<code>params</code>进行声明</p> <div class="language- extra-class"><pre class="language-text"><code>extend('password', {
  validate(value, { min, max }) {
    return value.length &gt;= min &amp;&amp; value.length &lt;= max
  },
  params: ['min', 'max']
})
</code></pre></div><h3 id="本地化"><a href="#本地化" class="header-anchor">#</a> 本地化</h3> <p><code>vee-validate</code>提供<code>localize</code>方法设置语言环境</p> <h3 id="设置语言环境"><a href="#设置语言环境" class="header-anchor">#</a> 设置语言环境</h3> <div class="language- extra-class"><pre class="language-text"><code>import { localize } from 'vee-validate';

// Activate the Arabic locale.
localize('ar');
</code></pre></div><p>也可以在设置语言环境的同时加载该语境下的 messages</p> <div class="language- extra-class"><pre class="language-text"><code>import { localize } from 'vee-validate';
import ar from 'vee-validate/dist/locale/ar.json';

// Install and Activate the Arabic locale.
localize('ar', ar);
</code></pre></div><h3 id="本地化字段名"><a href="#本地化字段名" class="header-anchor">#</a> 本地化字段名</h3> <p>默认字段名是<code>ValidationProvider</code>的<code>name</code>属性，可以通过<code>names</code>来配置其他语言版本</p> <div class="language- extra-class"><pre class="language-text"><code>localize({
  'zh-CN': {
    names: {
      email: '邮箱',
      password: '密码'
    }
  }
})
</code></pre></div><h3 id="本地化错误消息"><a href="#本地化错误消息" class="header-anchor">#</a> 本地化错误消息</h3> <p>默认提示信息都是英文的，通过设置<code>messages</code>可以在切换语言后显示对应语言的错误提示信息。<code>...zh.messages</code>是加载<code>vee-validate</code>内置的错误消息。<code>{_field_}</code>是一个占位符，它会被<code>ValidationProvider</code>的<code>name</code>属性值所替代</p> <div class="language- extra-class"><pre class="language-text"><code>import zh from 'vee-validate/dist/locale/zh_CN.json'
localize({
  'zh-CN': {
    messages: {
      ...zh.messages,
      required: '请输入{_field_}',
      email: '请输入正确的邮箱格式',
      password: '密码必须是6到18位'
    }
  }
})
</code></pre></div><h3 id="为每个字段设置错误消息"><a href="#为每个字段设置错误消息" class="header-anchor">#</a> 为每个字段设置错误消息</h3> <p><code>vee-validate</code>提供了<code>fields</code>选项，可以为某个字段的每一个规则定义不同错误提示消息</p> <div class="language- extra-class"><pre class="language-text"><code>localize({
  en: {
    fields: {
      password: {
        required: 'Password cannot be empty!',
        max: 'Are you really going to remember that?',
        min: 'Too few, you want to get doxed?'
      }
    }
  }
});
</code></pre></div><h2 id="懒加载"><a href="#懒加载" class="header-anchor">#</a> 懒加载</h2> <p>如果要为不同语言构建不同应用版本，那么一次导入所有<code>messages</code>显然不是很好的选择，可以使用动态导入方式代替</p> <div class="language- extra-class"><pre class="language-text"><code>import { localize } from 'vee-validate';

function loadLocale(code) {
  return import(`vee-validate/dist/locale/${code}.json`).then(locale =&gt; {
    localize(code, locale);
  });
}
</code></pre></div><h2 id="验证整个表单"><a href="#验证整个表单" class="header-anchor">#</a> 验证整个表单</h2> <p>在提交表单的时候需要对整个表单进行验证，这个时候需要用到<code>ValidationObserver</code>组件</p> <p>template</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;ValidationObserver tag=&quot;form&quot; ref=&quot;obs&quot;&gt;
  &lt;ValidationProvider class=&quot;form-item&quot; name=&quot;email&quot; tag=&quot;div&quot; rules=&quot;required|email&quot; v-slot=&quot;{ errors }&quot;&gt;
    &lt;label&gt;邮箱&lt;/label&gt;
    &lt;input v-model=&quot;email&quot; type=&quot;text&quot; /&gt;
    &lt;span class=&quot;ml-3&quot;&gt;{{ errors[0] }}&lt;/span&gt;
  &lt;/ValidationProvider&gt;
  &lt;ValidationProvider class=&quot;form-item&quot; name=&quot;password&quot; tag=&quot;div&quot; rules=&quot;required|password:6,18&quot; v-slot=&quot;{ errors }&quot;&gt;
    &lt;label&gt;密码&lt;/label&gt;
    &lt;input v-model=&quot;password&quot; type=&quot;password&quot; autocomplete=&quot;off&quot; /&gt;
    &lt;span class=&quot;ml-3&quot;&gt;{{ errors[0] }}&lt;/span&gt;
  &lt;/ValidationProvider&gt;
&lt;/ValidationObserver&gt;
</code></pre></div><p>script</p> <div class="language- extra-class"><pre class="language-text"><code>async submit() {
  const isValid = await this.$refs.obs.validate()
  if (!isValid) {
    // 没有通过校验
    return false
  }
  // 通过校验
},
</code></pre></div><h2 id="触发方式"><a href="#触发方式" class="header-anchor">#</a> 触发方式</h2> <p><code>vee-validate</code>提供了四种触发验证的方式，默认情况下用户输入时触发。</p> <ul><li>Aggressive，输入时触发(默认)</li> <li>Passive，表单提交时触发</li> <li>Lazy，失去焦点(blur)或者更改(change)时触发</li> <li>Eager，<code>Aggressive</code> 和 <code>Lazy</code> 的组合，当输入框失去焦点(blur)或者内容更改(change)时触发一次校验，如果无效，进入<code>Aggressive</code>模式，直到输入变为有效</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/alfalfaw/frontend/edit/main/docs/blog/vee-validate基本用法|前端.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend/blog/VuePress部署到GithubPages|前端.html" class="prev">
        VuePress 搭建个人博客网站
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/frontend/assets/js/app.81e51045.js" defer></script><script src="/frontend/assets/js/2.b2951490.js" defer></script><script src="/frontend/assets/js/12.dd903ed4.js" defer></script>
  </body>
</html>
