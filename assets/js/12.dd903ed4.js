(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{372:function(e,a,s){"use strict";s.r(a);var t=s(26),r=Object(t.a)({},(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"vee-validate-基本用法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vee-validate-基本用法"}},[e._v("#")]),e._v(" vee-validate 基本用法")]),e._v(" "),s("p",[s("code",[e._v("vee-validate")]),e._v(" 是一个轻量级的表单验证插件，内置了丰富的校验规则和错误提示，而且非常容易扩展，下面简单介绍它的使用方法")]),e._v(" "),s("h2",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[e._v("#")]),e._v(" 安装")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm i vee-validate\n")])])]),s("h2",{attrs:{id:"基本使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本使用"}},[e._v("#")]),e._v(" 基本使用")]),e._v(" "),s("p",[e._v("template")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('<ValidationProvider class="form-item" name="email" tag="div" rules="required|email" v-slot="{ errors }">\n  <label>邮箱</label>\n  <input v-model="email" type="text" />\n  <span class="ml-3">{{ errors[0] }}</span>\n</ValidationProvider>\n<ValidationProvider class="form-item" name="password" tag="div" rules="required|password:6,18" v-slot="{ errors }">\n  <label>密码</label>\n  <input v-model="password" type="password" autocomplete="off" />\n  <span class="ml-3">{{ errors[0] }}</span>\n</ValidationProvider>\n')])])]),s("p",[e._v("script")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("import { ValidationProvider } from 'vee-validate'\n\nexport default {\n  name: 'HelloI18n',\n  components: { ValidationProvider },\n  data() {\n    return {\n      email: ''，\n      password: ''\n    }\n  }\n}\n<\/script>\n")])])]),s("p",[s("code",[e._v("ValidationProvider")]),e._v("会自动在其子孙结点中查找具有"),s("code",[e._v("v-model")]),e._v("、"),s("code",[e._v(":value")]),e._v("的输入框并进行校验。"),s("code",[e._v("tag")]),e._v("指定"),s("code",[e._v("<ValidationProvider>")]),e._v("渲染成的 html 元素。"),s("code",[e._v("name")]),e._v("指定字段的名字，通过"),s("code",[e._v("name")]),e._v("还可以配置字段名的多语言版本，如果没有为"),s("code",[e._v("ValidationProvider")]),e._v("提供"),s("code",[e._v("name")]),e._v("，则字段名默认为输入框的"),s("code",[e._v("id")]),e._v("或者"),s("code",[e._v("name")]),e._v("属性。"),s("code",[e._v("rules")]),e._v("指定校验规则，应用多个规则用"),s("code",[e._v("|")]),e._v("隔开，"),s("code",[e._v("vee-validate")]),e._v("内置了许多校验"),s("a",{attrs:{href:"https://logaretm.github.io/vee-validate/guide/rules.html#rules",target:"_blank",rel:"noopener noreferrer"}},[e._v("规则"),s("OutboundLink")],1),e._v("，还可以通过"),s("code",[e._v("extent")]),e._v("自定义规则。")]),e._v(" "),s("h3",{attrs:{id:"校验规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#校验规则"}},[e._v("#")]),e._v(" 校验规则")]),e._v(" "),s("p",[e._v("一个项目中可能出现很多相同的输入框，为了让校验规则在这些输入框都能生效，可以在一个单独文件中定义所有校验规则，然后在"),s("code",[e._v("main.js")]),e._v("中引入")]),e._v(" "),s("p",[s("strong",[e._v("utils/veevalidate.js")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("import { extend, localize } from 'vee-validate'\nimport { required, email, min, length, confirmed } from 'vee-validate/dist/rules'\nimport zh from 'vee-validate/dist/locale/zh_CN.json'\nimport en from 'vee-validate/dist/locale/en.json'\nextend('email', email)\n\nextend('min', min)\nextend('required', required)\n\nextend('length', length)\n\nextend('confirmed', confirmed)\n\nextend('password', {\n  validate(value, { min, max }) {\n    return value.length >= min && value.length <= max\n  },\n  params: ['min', 'max']\n})\nlocalize({\n  'zh-CN': {\n    names: {\n      email: '邮箱',\n      password: '密码'\n    },\n    messages: {\n      ...zh.messages,\n      required: '请输入{_field_}',\n      email: '请输入正确的邮箱格式',\n      password: '密码必须是6到18位'\n    }\n  },\n  en: {\n    names: {\n      email: 'email',\n      password: 'password'\n    },\n    messages: {\n      ...en.messages,\n      required: 'please input {_field_}',\n      email: 'please input correct email',\n      password: 'the password length should be 6 to 18'\n    }\n  }\n})\n\nlocalize('zh-CN')\n")])])]),s("h3",{attrs:{id:"自定义校验规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义校验规则"}},[e._v("#")]),e._v(" 自定义校验规则")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("extend('ruleName', rule)\n")])])]),s("p",[e._v("第一个参数是规则名称，第二个参数是规则的 schema。如果希望在定义规则时同时定义错误消息体，可以像下面这样写")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("extend('required', {\n  ...required,      // 官方自带的校验规则\n  message: '必填项!!!' // 自定义错误消息\n})\n")])])]),s("h3",{attrs:{id:"传参"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#传参"}},[e._v("#")]),e._v(" 传参")]),e._v(" "),s("p",[e._v("自定义规则支持传参，如"),s("code",[e._v('rules="required|password:6,18"')]),e._v("表示应用"),s("code",[e._v("required")]),e._v("和"),s("code",[e._v("password")]),e._v("两个规则，并向第二个规则传递了两个参数，接收的参数需要在"),s("code",[e._v("params")]),e._v("进行声明")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("extend('password', {\n  validate(value, { min, max }) {\n    return value.length >= min && value.length <= max\n  },\n  params: ['min', 'max']\n})\n")])])]),s("h3",{attrs:{id:"本地化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本地化"}},[e._v("#")]),e._v(" 本地化")]),e._v(" "),s("p",[s("code",[e._v("vee-validate")]),e._v("提供"),s("code",[e._v("localize")]),e._v("方法设置语言环境")]),e._v(" "),s("h3",{attrs:{id:"设置语言环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置语言环境"}},[e._v("#")]),e._v(" 设置语言环境")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("import { localize } from 'vee-validate';\n\n// Activate the Arabic locale.\nlocalize('ar');\n")])])]),s("p",[e._v("也可以在设置语言环境的同时加载该语境下的 messages")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("import { localize } from 'vee-validate';\nimport ar from 'vee-validate/dist/locale/ar.json';\n\n// Install and Activate the Arabic locale.\nlocalize('ar', ar);\n")])])]),s("h3",{attrs:{id:"本地化字段名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本地化字段名"}},[e._v("#")]),e._v(" 本地化字段名")]),e._v(" "),s("p",[e._v("默认字段名是"),s("code",[e._v("ValidationProvider")]),e._v("的"),s("code",[e._v("name")]),e._v("属性，可以通过"),s("code",[e._v("names")]),e._v("来配置其他语言版本")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("localize({\n  'zh-CN': {\n    names: {\n      email: '邮箱',\n      password: '密码'\n    }\n  }\n})\n")])])]),s("h3",{attrs:{id:"本地化错误消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本地化错误消息"}},[e._v("#")]),e._v(" 本地化错误消息")]),e._v(" "),s("p",[e._v("默认提示信息都是英文的，通过设置"),s("code",[e._v("messages")]),e._v("可以在切换语言后显示对应语言的错误提示信息。"),s("code",[e._v("...zh.messages")]),e._v("是加载"),s("code",[e._v("vee-validate")]),e._v("内置的错误消息。"),s("code",[e._v("{_field_}")]),e._v("是一个占位符，它会被"),s("code",[e._v("ValidationProvider")]),e._v("的"),s("code",[e._v("name")]),e._v("属性值所替代")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("import zh from 'vee-validate/dist/locale/zh_CN.json'\nlocalize({\n  'zh-CN': {\n    messages: {\n      ...zh.messages,\n      required: '请输入{_field_}',\n      email: '请输入正确的邮箱格式',\n      password: '密码必须是6到18位'\n    }\n  }\n})\n")])])]),s("h3",{attrs:{id:"为每个字段设置错误消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为每个字段设置错误消息"}},[e._v("#")]),e._v(" 为每个字段设置错误消息")]),e._v(" "),s("p",[s("code",[e._v("vee-validate")]),e._v("提供了"),s("code",[e._v("fields")]),e._v("选项，可以为某个字段的每一个规则定义不同错误提示消息")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("localize({\n  en: {\n    fields: {\n      password: {\n        required: 'Password cannot be empty!',\n        max: 'Are you really going to remember that?',\n        min: 'Too few, you want to get doxed?'\n      }\n    }\n  }\n});\n")])])]),s("h2",{attrs:{id:"懒加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#懒加载"}},[e._v("#")]),e._v(" 懒加载")]),e._v(" "),s("p",[e._v("如果要为不同语言构建不同应用版本，那么一次导入所有"),s("code",[e._v("messages")]),e._v("显然不是很好的选择，可以使用动态导入方式代替")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("import { localize } from 'vee-validate';\n\nfunction loadLocale(code) {\n  return import(`vee-validate/dist/locale/${code}.json`).then(locale => {\n    localize(code, locale);\n  });\n}\n")])])]),s("h2",{attrs:{id:"验证整个表单"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#验证整个表单"}},[e._v("#")]),e._v(" 验证整个表单")]),e._v(" "),s("p",[e._v("在提交表单的时候需要对整个表单进行验证，这个时候需要用到"),s("code",[e._v("ValidationObserver")]),e._v("组件")]),e._v(" "),s("p",[e._v("template")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('<ValidationObserver tag="form" ref="obs">\n  <ValidationProvider class="form-item" name="email" tag="div" rules="required|email" v-slot="{ errors }">\n    <label>邮箱</label>\n    <input v-model="email" type="text" />\n    <span class="ml-3">{{ errors[0] }}</span>\n  </ValidationProvider>\n  <ValidationProvider class="form-item" name="password" tag="div" rules="required|password:6,18" v-slot="{ errors }">\n    <label>密码</label>\n    <input v-model="password" type="password" autocomplete="off" />\n    <span class="ml-3">{{ errors[0] }}</span>\n  </ValidationProvider>\n</ValidationObserver>\n')])])]),s("p",[e._v("script")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("async submit() {\n  const isValid = await this.$refs.obs.validate()\n  if (!isValid) {\n    // 没有通过校验\n    return false\n  }\n  // 通过校验\n},\n")])])]),s("h2",{attrs:{id:"触发方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#触发方式"}},[e._v("#")]),e._v(" 触发方式")]),e._v(" "),s("p",[s("code",[e._v("vee-validate")]),e._v("提供了四种触发验证的方式，默认情况下用户输入时触发。")]),e._v(" "),s("ul",[s("li",[e._v("Aggressive，输入时触发(默认)")]),e._v(" "),s("li",[e._v("Passive，表单提交时触发")]),e._v(" "),s("li",[e._v("Lazy，失去焦点(blur)或者更改(change)时触发")]),e._v(" "),s("li",[e._v("Eager，"),s("code",[e._v("Aggressive")]),e._v(" 和 "),s("code",[e._v("Lazy")]),e._v(" 的组合，当输入框失去焦点(blur)或者内容更改(change)时触发一次校验，如果无效，进入"),s("code",[e._v("Aggressive")]),e._v("模式，直到输入变为有效")])])])}),[],!1,null,null,null);a.default=r.exports}}]);